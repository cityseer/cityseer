<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cityseer API Docs</title>
    <meta name="description" content="Computational tools for urban analysis">
    
    
    <link rel="preload" href="/cityseer/assets/css/0.styles.6137d601.css" as="style"><link rel="preload" href="/cityseer/assets/js/app.ffe07a9b.js" as="script"><link rel="preload" href="/cityseer/assets/js/2.1b2a85c3.js" as="script"><link rel="preload" href="/cityseer/assets/js/7.1abd5355.js" as="script"><link rel="preload" href="/cityseer/assets/js/13.29c22ad6.js" as="script"><link rel="preload" href="/cityseer/assets/js/12.99207078.js" as="script"><link rel="preload" href="/cityseer/assets/js/11.8afffa76.js" as="script"><link rel="preload" href="/cityseer/assets/js/10.86e4b51d.js" as="script"><link rel="prefetch" href="/cityseer/assets/js/14.ada2d908.js"><link rel="prefetch" href="/cityseer/assets/js/15.6e515695.js"><link rel="prefetch" href="/cityseer/assets/js/16.75883c5a.js"><link rel="prefetch" href="/cityseer/assets/js/17.47aec7f0.js"><link rel="prefetch" href="/cityseer/assets/js/18.cb079273.js"><link rel="prefetch" href="/cityseer/assets/js/19.ba4f6e6e.js"><link rel="prefetch" href="/cityseer/assets/js/20.23c51d91.js"><link rel="prefetch" href="/cityseer/assets/js/3.6649a6ec.js"><link rel="prefetch" href="/cityseer/assets/js/4.26c9a560.js"><link rel="prefetch" href="/cityseer/assets/js/5.08779ab8.js"><link rel="prefetch" href="/cityseer/assets/js/6.74e45169.js"><link rel="prefetch" href="/cityseer/assets/js/8.e065b7d6.js"><link rel="prefetch" href="/cityseer/assets/js/9.bc774860.js">
    <link rel="stylesheet" href="/cityseer/assets/css/0.styles.6137d601.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cityseer/" class="home-link router-link-active"><img src="/cityseer/round_logo.png" alt="Cityseer API Docs" class="logo"> <span class="site-name can-hide">Cityseer API Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cityseer/" class="nav-link">home</a></div><div class="nav-item"><a href="/cityseer/intro.html" class="nav-link">docs</a></div><div class="nav-item"><a href="https://cityseer.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cityseer.io
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/cityseer/cityseer" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cityseer/" class="nav-link">home</a></div><div class="nav-item"><a href="/cityseer/intro.html" class="nav-link">docs</a></div><div class="nav-item"><a href="https://cityseer.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  cityseer.io
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/cityseer/cityseer" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cityseer/intro.html" class="sidebar-link">intro</a></li><li><a href="/cityseer/attribution.html" class="sidebar-link">attribution</a></li><li><a href="/cityseer/license.html" class="sidebar-link">license</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cityseer/guide/cleaning.html" class="sidebar-link">graph cleaning</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>cityseer.metrics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cityseer/metrics/layers.html" class="sidebar-link">metrics.layers</a></li><li><a href="/cityseer/metrics/networks.html" class="active sidebar-link">metrics.networks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#distance-from-beta" class="sidebar-link">distance_from_beta</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#beta-from-distance" class="sidebar-link">beta_from_distance</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#network-layer" class="sidebar-link">Network_Layer</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#metrics-to-dict" class="sidebar-link">@metrics_to_dict</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#to-networkx" class="sidebar-link">@to_networkX</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#compute-centrality" class="sidebar-link">@compute_centrality</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#harmonic-closeness" class="sidebar-link">@harmonic_closeness</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#improved-closeness" class="sidebar-link">@improved_closeness</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#gravity-index" class="sidebar-link">@gravity_index</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#betweenness" class="sidebar-link">@betweenness</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#betweenness-decay" class="sidebar-link">@betweenness_decay</a></li><li class="sidebar-sub-header"><a href="/cityseer/metrics/networks.html#network-layer-from-nx" class="sidebar-link">Network_Layer_From_nX</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>cityseer.util</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cityseer/util/graphs.html" class="sidebar-link">util.graphs</a></li><li><a href="/cityseer/util/mock.html" class="sidebar-link">util.mock</a></li><li><a href="/cityseer/util/plot.html" class="sidebar-link">util.plot</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cityseer-metrics-centrality"><a href="#cityseer-metrics-centrality" aria-hidden="true" class="header-anchor">#</a> cityseer.metrics.centrality</h1> <h2 id="distance-from-beta"><a href="#distance-from-beta" aria-hidden="true" class="header-anchor">#</a> distance_from_beta</h2> <div class="sig-style" data-v-be8a829e><pre data-v-be8a829e>distance_from_beta(beta,
                   min_threshold_wt=0.01831563888873418)
</pre></div> <p>Maps decay parameters <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container> to equivalent distance thresholds <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> at the specified cutoff weight <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>.</p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>It is generally not necessary to utilise this function directly. It will be called internally, if necessary, when invoking <a href="#network-layer">Network_Layer</a> or <a href="#network-layer-from-nx">Network_Layer_From_nX</a>.</p></div> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      beta
    </div> <div class="elem-type" data-v-342b6d4a>
      float, list[float], numpy.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a><mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container> value/s to convert to distance thresholds <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="d" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="a" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="x" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      min_threshold_wt
    </div> <div class="elem-type" data-v-342b6d4a>
      float
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>The cutoff weight <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="w" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="i" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="n" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> at which to set the distance threshold <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="d" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="a" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="x" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      distances
    </div> <div class="elem-type" data-v-342b6d4a>
      numpy.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A numpy array of distance thresholds <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="d" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="a" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="x" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>.</p></div></div> <div class="language-python line-numbers-mode"><pre class="language-python"><code>
<span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> networks
<span class="token comment"># a list of betas</span>
betas <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.02</span><span class="token punctuation">]</span>
<span class="token comment"># convert to distance thresholds</span>
d_max <span class="token operator">=</span> networks<span class="token punctuation">.</span>distance_from_beta<span class="token punctuation">(</span>betas<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>d_max<span class="token punctuation">)</span>  <span class="token comment"># prints: array([400., 200.])</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Weighted measures such as the gravity index, weighted betweenness, and weighted land-use accessibilities are computed using a negative exponential decay function in the form of:</p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="g"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="h"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="p"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-math></mjx-container></p><p></p> <p>The strength of the decay is controlled by the <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container> parameter, which reflects a decreasing willingness to walk correspondingly farther distances. For example, if <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mo space="4" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="5"></mjx-c></mjx-mn></mjx-math></mjx-container> were to represent a person's willingness to walk to a bus stop, then a location <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container> distant would be weighted at <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="6"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-n"><mjx-c c="%"></mjx-c></mjx-mi></mjx-math></mjx-container> and a location <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="4"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container> away would be weighted at <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="5"></mjx-c></mjx-mn><mjx-mi class="mjx-n"><mjx-c c="%"></mjx-c></mjx-mi></mjx-math></mjx-container>. After an initially rapid decrease, the weightings decay ever more gradually in perpetuity; thus, once a sufficiently small weight is encountered it becomes computationally expensive to consider locations any farther away. The minimum weight at which this cutoff occurs is represented by <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>, and the corresponding maximum distance threshold by <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>.</p> <img src="/cityseer/assets/img/betas.aee1cb50.png" alt="Example beta decays" class="centre"> <p><a href="#network-layer">Network_Layer</a> and <a href="/cityseer/metrics/networks.html#network-layer-from-nx">Network_Layer_From_nX</a> can be invoked with either <code>distances</code> or <code>betas</code> parameters, but not both. If using the <code>betas</code> parameter, then this function will be called in order to extrapolate the distance thresholds implicitly, using:</p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="g"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-lop"><mjx-c c="("></mjx-c></mjx-mo></mjx-TeXAtom><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub><mjx-TeXAtom><mjx-mo class="mjx-lop"><mjx-c c=")"></mjx-c></mjx-mo></mjx-TeXAtom></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></p><p></p> <p>The default <code>min_threshold_wt</code> of <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="1"></mjx-c><mjx-c c="5"></mjx-c><mjx-c c="6"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="7"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="4"></mjx-c><mjx-c c="1"></mjx-c><mjx-c c="8"></mjx-c></mjx-mn></mjx-math></mjx-container> yields conveniently rounded <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> walking thresholds, for example:</p> <table><thead><tr><th><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container></th> <th><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container></th></tr></thead> <tbody><tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="4"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="5"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="8"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="2"></mjx-c><mjx-c c="5"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="6"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td></tr></tbody></table> <p>Overriding the default <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> will adjust the <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> accordingly, for example:</p> <table><thead><tr><th><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container></th> <th><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container></th> <th><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container></th></tr></thead> <tbody><tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="4"></mjx-c><mjx-c c="6"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="5"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="9"></mjx-c><mjx-c c="2"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="2"></mjx-c><mjx-c c="5"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="4"></mjx-c><mjx-c c="2"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td></tr></tbody></table> <h2 id="beta-from-distance"><a href="#beta-from-distance" aria-hidden="true" class="header-anchor">#</a> beta_from_distance <div class="chip-style">
  v0.8.10
</div></h2> <div class="sig-style" data-v-be8a829e><pre data-v-be8a829e>beta_from_distance(distance,
                   min_threshold_wt=0.01831563888873418)
</pre></div> <p>Maps distance thresholds <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> to equivalent decay parameters <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container> at the specified cutoff weight <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>. See <a href="#distance-from-beta">distance_from_beta</a> for additional discussion.</p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>It is generally not necessary to utilise this function directly. It will be called internally, if necessary, when invoking <a href="#network-layer">Network_Layer</a> or <a href="#network-layer-from-nx">Network_Layer_From_nX</a>.</p></div> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      distance
    </div> <div class="elem-type" data-v-342b6d4a>
      float, list[float], numpy.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a><mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="d" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="a" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="x" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> value/s to convert to decay parameters <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container>.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      min_threshold_wt
    </div> <div class="elem-type" data-v-342b6d4a>
      float
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>The cutoff weight <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="w" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="i" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="n" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> on which to model the decay parameters <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container>.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      betas
    </div> <div class="elem-type" data-v-342b6d4a>
      numpy.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A numpy array of decay parameters <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container>.</p></div></div> <div class="language-python line-numbers-mode"><pre class="language-python"><code>
<span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> networks
<span class="token comment"># a list of betas</span>
distances <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">]</span>
<span class="token comment"># convert to betas</span>
betas <span class="token operator">=</span> networks<span class="token punctuation">.</span>beta_from_distance<span class="token punctuation">(</span>distances<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>betas<span class="token punctuation">)</span>  <span class="token comment"># prints: array([-0.01, -0.02])</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><a href="#network-layer">Network_Layer</a> and <a href="#network-layer-from-nx">Network_Layer_From_nX</a> can be invoked with either <code>distances</code> or <code>betas</code> parameters, but not both. If using the <code>distances</code> parameter, then this function will be called in order to extrapolate the decay parameters implicitly, using:</p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="g"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-lop"><mjx-c c="("></mjx-c></mjx-mo></mjx-TeXAtom><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub><mjx-TeXAtom><mjx-mo class="mjx-lop"><mjx-c c=")"></mjx-c></mjx-mo></mjx-TeXAtom></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></p><p></p> <p>The default <code>min_threshold_wt</code> of <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="1"></mjx-c><mjx-c c="5"></mjx-c><mjx-c c="6"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="8"></mjx-c><mjx-c c="7"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="4"></mjx-c><mjx-c c="1"></mjx-c><mjx-c c="8"></mjx-c></mjx-mn></mjx-math></mjx-container> yields conveniently rounded <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container> parameters, for example:</p> <table><thead><tr><th><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container></th> <th><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container></th></tr></thead> <tbody><tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="4"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="8"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="5"></mjx-c></mjx-mn></mjx-math></mjx-container></td></tr> <tr><td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="6"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="2"></mjx-c><mjx-c c="5"></mjx-c></mjx-mn></mjx-math></mjx-container></td></tr></tbody></table> <h2 id="network-layer"><a href="#network-layer" aria-hidden="true" class="header-anchor">#</a> Network_Layer <div class="chip-style">
  class
</div></h2> <div class="sig-style" data-v-be8a829e><pre data-v-be8a829e>Network_Layer(node_uids,
              node_map,
              edge_map,
              distances=None,
              betas=None,
              min_threshold_wt=0.01831563888873418,
              angular=False)
</pre></div> <p>Network layers are used for network centrality computations and provide the backbone for landuse and statistical aggregations. <a href="#network-layer-from-nx"><code>Network_Layer_From_nX</code></a> should be used instead if converting from a <code>NetworkX</code> graph to a <code>Network_Layer</code>.</p> <p>A <code>Network_Layer</code> requires either a set of distances <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> or equivalent exponential decay parameters <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container>, but not both. The unprovided parameter will be calculated implicitly in order to keep weighted and unweighted metrics in lockstep. The <code>min_threshold_wt</code> parameter can be used to generate custom mappings from one to the other: see <a href="#distance-from-beta">distance_from_beta</a> for more information. These distances and betas will be used for any subsequent centrality and land-use calculations.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> networks
<span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>util <span class="token keyword">import</span> mock<span class="token punctuation">,</span> graphs

<span class="token comment"># prepare a mock graph</span>
G <span class="token operator">=</span> mock<span class="token punctuation">.</span>mock_graph<span class="token punctuation">(</span><span class="token punctuation">)</span>
G <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_simple_geoms<span class="token punctuation">(</span>G<span class="token punctuation">)</span>
G <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_auto_edge_params<span class="token punctuation">(</span>G<span class="token punctuation">)</span>

<span class="token comment"># if initialised with distances: </span>
<span class="token comment"># betas for weighted metrics will be generated implicitly</span>
N <span class="token operator">=</span> networks<span class="token punctuation">.</span>Network_Layer_From_nX<span class="token punctuation">(</span>G<span class="token punctuation">,</span> distances<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1600</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>N<span class="token punctuation">.</span>distances<span class="token punctuation">)</span>  <span class="token comment"># prints: [200, 400, 800, 1600]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>N<span class="token punctuation">.</span>betas<span class="token punctuation">)</span>  <span class="token comment"># prints: [-0.02, -0.01, -0.005, -0.0025]</span>

<span class="token comment"># if initialised with betas: </span>
<span class="token comment"># distances for non-weighted metrics will be generated implicitly</span>
N <span class="token operator">=</span> networks<span class="token punctuation">.</span>Network_Layer_From_nX<span class="token punctuation">(</span>G<span class="token punctuation">,</span> betas<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.005</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.0025</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>N<span class="token punctuation">.</span>distances<span class="token punctuation">)</span>  <span class="token comment"># prints: [200, 400, 800, 1600]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>N<span class="token punctuation">.</span>betas<span class="token punctuation">)</span>  <span class="token comment"># prints: [-0.02, -0.01, -0.005, -0.0025]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      node_uids
    </div> <div class="elem-type" data-v-342b6d4a>
      list, tuple
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>list</code> or <code data-v-342b6d4a>tuple</code> of node identifiers corresponding to each node. This list must be in the same order and of the same length as the <code data-v-342b6d4a>node_map</code>.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      node_map
    </div> <div class="elem-type" data-v-342b6d4a>
      np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A 2d <code data-v-342b6d4a>numpy</code> array representing the graph's nodes. The indices of the second dimension correspond as follows:</p> <table data-v-342b6d4a><thead data-v-342b6d4a><tr data-v-342b6d4a><th data-v-342b6d4a>idx</th> <th style="text-align:left;" data-v-342b6d4a>property</th></tr></thead> <tbody data-v-342b6d4a><tr data-v-342b6d4a><td data-v-342b6d4a>0</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>x</code> coordinate</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>1</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>y</code> coordinate</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>2</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>bool</code> describing whether the node is <code data-v-342b6d4a>live</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>3</td> <td style="text-align:left;" data-v-342b6d4a>start <code data-v-342b6d4a>idx</code> for the corresponding edge map</td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>4</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>weight</code> applied to the node</td></tr></tbody></table></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      edge_map
    </div> <div class="elem-type" data-v-342b6d4a>
      np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A 2d <code data-v-342b6d4a>numpy</code> array representing the graph's edges. The indices of the second dimension correspond as follows:</p> <table data-v-342b6d4a><thead data-v-342b6d4a><tr data-v-342b6d4a><th data-v-342b6d4a>idx</th> <th style="text-align:left;" data-v-342b6d4a>property</th></tr></thead> <tbody data-v-342b6d4a><tr data-v-342b6d4a><td data-v-342b6d4a>0</td> <td style="text-align:left;" data-v-342b6d4a>start node <code data-v-342b6d4a>idx</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>1</td> <td style="text-align:left;" data-v-342b6d4a>end node <code data-v-342b6d4a>idx</code></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>2</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>length</code> in metres for enforcing <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="d" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="a" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="x" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container></td></tr> <tr data-v-342b6d4a><td data-v-342b6d4a>3</td> <td style="text-align:left;" data-v-342b6d4a><code data-v-342b6d4a>impedance</code> for shortest path calculations</td></tr></tbody></table></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      distances
    </div> <div class="elem-type" data-v-342b6d4a>
      int, float, list, tuple, np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A distance, or <code data-v-342b6d4a>list</code>, <code data-v-342b6d4a>tuple</code>, or <code data-v-342b6d4a>numpy</code> array of distances corresponding to the local <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="d" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="a" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="x" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> thresholds to be used for centrality (and land-use) calculations. The <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container> parameters (for distance-weighted metrics) will be determined implicitly. If the <code data-v-342b6d4a>distances</code> parameter is not provided, then the <code data-v-342b6d4a>beta</code> parameter must be provided instead. Use a distance of <code data-v-342b6d4a>np.inf</code> where no distance threshold should be enforced.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      betas
    </div> <div class="elem-type" data-v-342b6d4a>
      float, list, tuple, np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container>, or <code data-v-342b6d4a>list</code>, <code data-v-342b6d4a>tuple</code>, or <code data-v-342b6d4a>numpy</code> array of <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container> to be used for the exponential decay function for weighted metrics. The <code data-v-342b6d4a>distance</code> parameters for unweighted metrics will be determined implicitly. If the <code data-v-342b6d4a>betas</code> parameter is not provided, then the <code data-v-342b6d4a>distance</code> parameter must be provided instead.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      min_threshold_wt
    </div> <div class="elem-type" data-v-342b6d4a>
      float
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>The default <code data-v-342b6d4a>min_threshold_wt</code> parameter can be overridden to generate custom mappings between the <code data-v-342b6d4a>distance</code> and <code data-v-342b6d4a>beta</code> parameters. See <a href="#distance-from-beta" data-v-342b6d4a>distance_from_beta</a> for more information.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      angular
    </div> <div class="elem-type" data-v-342b6d4a>
      bool
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>Set the <code data-v-342b6d4a>angular</code> parameter to <code data-v-342b6d4a>True</code> if using angular impedances. Angular impedances can cause shortest-path algorithms to sidestep sharp turns, potentially resulting in misleading results. Setting <code data-v-342b6d4a>angular=True</code> will forestall this behaviour.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      Network_Layer
    </div> <div class="elem-type" data-v-342b6d4a>
      class
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>Network_Layer</code>.</p></div></div> <h3 id="node-attributes"><a href="#node-attributes" aria-hidden="true" class="header-anchor">#</a> Node attributes</h3> <p>The <code>x</code> and <code>y</code> node attributes determine the spatial coordinates of the node, and should be in a suitable projected (flat) coordinate reference system in metres. <a href="/cityseer/util/graphs.html#nx-wgs-to-utm"><code>nX_wgs_to_utm</code></a> can be used for converting a <code>networkX</code> graph from WGS84 <code>lng</code>, <code>lat</code> geographic coordinates to the local UTM <code>x</code>, <code>y</code> projected coordinate system.</p> <p>When calculating local network centralities or land-use accessibilities, it is best-practice to buffer the network by a distance equal to the maximum distance threshold to be considered. This prevents problematic results arising due to boundary roll-off effects. The <code>live</code> node attribute identifies nodes falling within the areal boundary of interest as opposed to those that fall within the surrounding buffered area. Calculations are only performed for <code>live=True</code> nodes, thus reducing frivolous computation while also cleanly identifying which nodes are in the buffered roll-off area. If some other process will be used for filtering the nodes, or if boundary roll-off is not being considered, then set all nodes to <code>live=True</code>.</p> <p>The <code>idx</code> node attribute maps the current node to the starting edge-index for associated out-edges. Note that there may be more than one edge associated with any particular node. These are represented in sequential order in the <code>edge_map</code>, and therefore only the first such edge is identified by the <code>idx</code> node attribute.</p> <p>The <code>weight</code> parameter allows centrality calculations to be weighted by external considerations, e.g. adjacent edge lengths, building density, etc. Set to a default value of <code>1</code> for all nodes if weights are not to be considered.</p> <h3 id="edge-attributes"><a href="#edge-attributes" aria-hidden="true" class="header-anchor">#</a> Edge attributes</h3> <p>The start and end edge <code>idx</code> attributes point to the corresponding node indices in the <code>node_map</code>.</p> <p>The <code>length</code> edge attribute should always correspond to the edge lengths in metres. This is used when calculating the distances traversed by the shortest-path algorithm so that the respective <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> maximum distance thresholds can be enforced: these distance thresholds are based on the actual network-paths traversed by the algorithm as opposed to crow-flies distances.</p> <p>The <code>impedance</code> edge attribute represents the friction to movement across the network: it is used by the shortest-path algorithm when calculating the shortest-routes from each origin node <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-math></mjx-container> to all surrounding nodes <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-math></mjx-container> within the respective <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> distance thresholds. For shortest-path centralities, the <code>impedance</code> attribute will generally assume the same value as the <code>length</code> attribute. This need not be the case; for example, simplest-path centralities assume an angular <code>impedance</code> attribute representing the angular change in direction across the length of a street segment (on the dual graph).</p> <div class="tip custom-block"><p class="custom-block-title">Hint</p> <p>It is possible to represent unlimited <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> distance thresholds by setting one of the specified <code>distance</code> parameter values to <code>np.inf</code>. Note that this may substantially increase the computational time required for the completion of the algorithms on large networks.</p></div> <h2 id="metrics-to-dict"><a href="#metrics-to-dict" aria-hidden="true" class="header-anchor">#</a> @metrics_to_dict</h2> <div class="sig-style" data-v-be8a829e>Network_Layer.metrics_to_dict()</div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      metrics_dict
    </div> <div class="elem-type" data-v-342b6d4a>
      dict
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>Unpacks all calculated metrics from the  <code data-v-342b6d4a>Network_Layer.metrics</code> property into a <code data-v-342b6d4a>python</code> dictionary. The dictionary <code data-v-342b6d4a>keys</code> will correspond to the node <code data-v-342b6d4a>uids</code>.</p></div></div> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> networks
<span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>util <span class="token keyword">import</span> mock<span class="token punctuation">,</span> graphs

<span class="token comment"># prepare a mock graph</span>
G <span class="token operator">=</span> mock<span class="token punctuation">.</span>mock_graph<span class="token punctuation">(</span><span class="token punctuation">)</span>
G <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_simple_geoms<span class="token punctuation">(</span>G<span class="token punctuation">)</span>
G <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_auto_edge_params<span class="token punctuation">(</span>G<span class="token punctuation">)</span>

<span class="token comment"># generate the network layer and compute some metrics</span>
N <span class="token operator">=</span> networks<span class="token punctuation">.</span>Network_Layer_From_nX<span class="token punctuation">(</span>G<span class="token punctuation">,</span> distances<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1600</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
N<span class="token punctuation">.</span>harmonic_closeness<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># let's select a random node id</span>
random_idx <span class="token operator">=</span> <span class="token number">6</span>
random_uid <span class="token operator">=</span> N<span class="token punctuation">.</span>uids<span class="token punctuation">[</span>random_idx<span class="token punctuation">]</span>

<span class="token comment"># the data is directly available at N.metrics</span>
<span class="token comment"># in this case the data is stored in arrays corresponding to the node indices</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>N<span class="token punctuation">.</span>metrics<span class="token punctuation">[</span><span class="token string">'centrality'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'harmonic'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">[</span>random_idx<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># prints: 0.02312025367905132</span>

<span class="token comment"># let's convert the data to a dictionary</span>
<span class="token comment"># the unpacked data is now stored by the uid of the node identifier</span>
data_dict <span class="token operator">=</span> N<span class="token punctuation">.</span>metrics_to_dict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data_dict<span class="token punctuation">[</span>random_uid<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'centrality'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'harmonic'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># prints: 0.02312025367905132</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="to-networkx"><a href="#to-networkx" aria-hidden="true" class="header-anchor">#</a> @to_networkX</h2> <div class="sig-style" data-v-be8a829e>Network_Layer.to_networkX()</div> <p>Transposes a <code>Network_Layer</code> into a <code>networkX</code> graph. This method calls <a href="/cityseer/util/graphs.html#nx-from-graph-maps">nX_from_graph_maps</a> internally.</p> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph.</p> <p data-v-342b6d4a><code data-v-342b6d4a>x</code>, <code data-v-342b6d4a>y</code>, <code data-v-342b6d4a>live</code>, <code data-v-342b6d4a>weight</code> node attributes will be copied from the <code data-v-342b6d4a>node_map</code> to the graph nodes. <code data-v-342b6d4a>length</code> and <code data-v-342b6d4a>impedance</code> attributes will be copied from the <code data-v-342b6d4a>edge_map</code> to the graph edges.</p> <p data-v-342b6d4a>Any data from computed metrics will be copied to each of the graph's nodes.</p></div></div> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> networks
<span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>util <span class="token keyword">import</span> mock<span class="token punctuation">,</span> graphs

<span class="token comment"># prepare a mock graph</span>
G <span class="token operator">=</span> mock<span class="token punctuation">.</span>mock_graph<span class="token punctuation">(</span><span class="token punctuation">)</span>
G <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_simple_geoms<span class="token punctuation">(</span>G<span class="token punctuation">)</span>
G <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_auto_edge_params<span class="token punctuation">(</span>G<span class="token punctuation">)</span>

<span class="token comment"># generate the network layer and compute some metrics</span>
N <span class="token operator">=</span> networks<span class="token punctuation">.</span>Network_Layer_From_nX<span class="token punctuation">(</span>G<span class="token punctuation">,</span> distances<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1600</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># compute some-or-other metrics</span>
N<span class="token punctuation">.</span>harmonic_closeness<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># convert back to networkX</span>
G_post <span class="token operator">=</span> N<span class="token punctuation">.</span>to_networkX<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># let's select a random node id</span>
random_idx <span class="token operator">=</span> <span class="token number">6</span>
random_uid <span class="token operator">=</span> N<span class="token punctuation">.</span>uids<span class="token punctuation">[</span>random_idx<span class="token punctuation">]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>N<span class="token punctuation">.</span>metrics<span class="token punctuation">[</span><span class="token string">'centrality'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'harmonic'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">[</span>random_idx<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># prints: 0.02312025367905132</span>

<span class="token comment"># the metrics have been copied to the new networkX graph</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>G_post<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>random_uid<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'metrics'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'centrality'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'harmonic'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># prints: 0.02312025367905132</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><img src="/cityseer/assets/img/graph_before.9a31cdec.png" alt="Graph before conversion" class="left"><img src="/cityseer/assets/img/graph_after.9a31cdec.png" alt="graph after conversion back to networkX" class="right"></p> <p><em>A <code>networkX</code> graph before conversion to a <code>Network_Layer</code> (left) and after conversion back to <code>networkX</code> (right).</em></p> <h2 id="compute-centrality"><a href="#compute-centrality" aria-hidden="true" class="header-anchor">#</a> @compute_centrality</h2> <div class="sig-style" data-v-be8a829e><pre data-v-be8a829e>Network_Layer.compute_centrality(close_metrics=None,
                                 between_metrics=None)
</pre></div> <p>This method wraps the underlying <code>numba</code> optimised functions for computing network centralities, and provides access to all the available centrality methods. These are computed simultaneously for any required combinations of measures (and distances), which can have significant speed implications. Situations requiring only a single measure can instead make use of the simplified <a href="#gravity-index"><code>@gravity_index</code></a>, <a href="#harmonic-closeness"><code>@harmonic_closeness</code></a>, <a href="#improved-closeness"><code>@improved_closeness</code></a>, <a href="#betweenness"><code>@betweenness</code></a>, or <a href="#betweenness-decay"><code>@betweenness_decay</code></a> methods.</p> <p>The computed metrics will be written to a dictionary available at the <code>Network_Layer.metrics</code> property and will be categorised by the respective centrality and distance keys:</p> <p><code>Network_Layer.metrics['centrality'][&lt;&lt;centrality key&gt;&gt;][&lt;&lt;distance key&gt;&gt;][&lt;&lt;node idx&gt;&gt;]</code></p> <p>For example, if <code>node_density</code>, <code>improved</code>, and <code>cycles</code> centrality keys are computed at <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="8"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container> and <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="6"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi></mjx-math></mjx-container>, then the dictionary would assume the following structure:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># example structure</span>
Network_Layer<span class="token punctuation">.</span>metrics <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'centrality'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'node_density'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token number">800</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token number">1600</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'improved'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token number">800</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token number">1600</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'cycles'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token number">800</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token number">1600</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>A working example:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> networks
<span class="token keyword">from</span> cityseer<span class="token punctuation">.</span>util <span class="token keyword">import</span> mock<span class="token punctuation">,</span> graphs

<span class="token comment"># prepare a mock graph</span>
G <span class="token operator">=</span> mock<span class="token punctuation">.</span>mock_graph<span class="token punctuation">(</span><span class="token punctuation">)</span>
G <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_simple_geoms<span class="token punctuation">(</span>G<span class="token punctuation">)</span>
G <span class="token operator">=</span> graphs<span class="token punctuation">.</span>nX_auto_edge_params<span class="token punctuation">(</span>G<span class="token punctuation">)</span>

<span class="token comment"># generate the network layer and compute some metrics</span>
N <span class="token operator">=</span> networks<span class="token punctuation">.</span>Network_Layer_From_nX<span class="token punctuation">(</span>G<span class="token punctuation">,</span> distances<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1600</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># compute a centrality measure</span>
<span class="token comment"># note that in this case N.harmonic_closeness() would do exactly the same</span>
N<span class="token punctuation">.</span>compute_centrality<span class="token punctuation">(</span>close_metrics<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'harmonic'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># distance idx: any of the distances with which the Network_Layer was initialised</span>
distance_idx <span class="token operator">=</span> <span class="token number">200</span>
<span class="token comment"># let's select a random node idx</span>
random_idx <span class="token operator">=</span> <span class="token number">6</span>

<span class="token comment"># the data is available at N.metrics</span>
<span class="token comment"># in this case we need the 'harmonic' key</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>N<span class="token punctuation">.</span>metrics<span class="token punctuation">[</span><span class="token string">'centrality'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'harmonic'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>distance_idx<span class="token punctuation">]</span><span class="token punctuation">[</span>random_idx<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># prints: 0.02312025367905132</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Note that the data can also be unpacked to a dictionary using <a href="#metrics-to-dict"><code>@metrics_to_dict</code></a>, or transposed to a <code>networkX</code> graph using <a href="#to-networkx"><code>@to_networkX</code></a>.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      close_metrics
    </div> <div class="elem-type" data-v-342b6d4a>
      list[str], tuple[str]
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A list of strings, containing any combination of the following <code data-v-342b6d4a>key</code> values:</p></div></div> <table><thead><tr><th>key</th> <th style="text-align:center;">formula</th> <th>notes</th></tr></thead> <tbody><tr><td>node_density</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;padding-left:0.179em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-msub space="2"><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-mstyle></mjx-math></mjx-container></td> <td>The default <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container> reduces to a simple node count, however, this is technically a density measure because of the <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> threshold constraint. Setting <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi></mjx-math></mjx-container> equal to adjacent street lengths converts this measure into a street density metric.</td></tr> <tr><td>farness_impedance</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;padding-left:0.179em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-mfrac space="2"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="Z"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.177em;"><mjx-TeXAtom size="s"><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-TeXAtom></mjx-script></mjx-msub></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-mstyle></mjx-math></mjx-container></td> <td><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container> reduces to the sum of impedances <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="Z"></mjx-c></mjx-mi></mjx-math></mjx-container> within the threshold <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>. Be cautious with weights where <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="0"></mjx-c></mjx-mn></mjx-math></mjx-container> because this would return <code>np.inf</code>.</td></tr> <tr><td>farness_distance</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;padding-left:0.179em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-msub space="2"><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.177em;"><mjx-TeXAtom size="s"><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-TeXAtom></mjx-script></mjx-msub></mjx-mstyle></mjx-math></mjx-container></td> <td>A summation of distances in metres within <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>.</td></tr> <tr><td>harmonic</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;padding-left:0.179em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-mfrac space="2"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="Z"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.177em;"><mjx-TeXAtom size="s"><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-TeXAtom></mjx-script></mjx-msub></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-mstyle></mjx-math></mjx-container></td> <td>Reduces to <em>harmonic closeness</em> where <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container>. Harmonic closeness is the appropriate form of closeness centrality for localised implementations constrained by the threshold <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>. (Conventional forms of closeness centrality should not be used in a localised context.)</td></tr> <tr><td>improved</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-mfrac><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="N"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn space="3" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-msup><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo><mjx-script style="vertical-align:0.363em;"><mjx-mn size="s" class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-script></mjx-msup></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-munder limits="false"><mjx-mo class="mjx-sop"><mjx-c c="2211"></mjx-c></mjx-mo><mjx-script style="vertical-align:-0.285em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-script></mjx-munder><mjx-msub space="2"><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.177em;"><mjx-TeXAtom size="s"><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-TeXAtom></mjx-script></mjx-msub></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-mstyle></mjx-math></mjx-container></td> <td>A simplified variant of <em>&quot;improved&quot;</em> closeness. As with harmonic closeness, this variant behaves appropriately on localised implementations.</td></tr> <tr><td>gravity index</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;padding-left:0.179em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-mi space="2" class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="p"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="["></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="]"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-mstyle></mjx-math></mjx-container></td> <td>Reduces to the <em>gravity index</em> where <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container>. The gravity index is more correctly described as a spatial impedance metric and is differentiated from other closeness centralities by the use of an explicit <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container> parameter modelling distance decays.</td></tr> <tr><td>cycles</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-munderover><mjx-over style="padding-bottom:0.111em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="y"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base style="padding-left:0.193em;"><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;padding-left:0.373em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mi space="2" class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="p"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="["></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="]"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-mstyle></mjx-math></mjx-container></td> <td>A summation of distance-weighted network cycles within the threshold <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container></td></tr></tbody></table> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      between_metrics
    </div> <div class="elem-type" data-v-342b6d4a>
      list[str], tuple[str]
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A list of strings, containing any combination of the following <code data-v-342b6d4a>key</code> values:</p></div></div> <table><thead><tr><th>key</th> <th style="text-align:center;">formula</th> <th>notes</th></tr></thead> <tbody><tr><td>betweenness</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;padding-left:0.179em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-munder space="2"><mjx-row><mjx-base style="padding-left:0.28em;"><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-msub space="2"><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.177em;"><mjx-TeXAtom size="s"><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-TeXAtom></mjx-script></mjx-msub></mjx-mstyle></mjx-math></mjx-container></td> <td>The default <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container> reduces to betweenness centrality within the <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> threshold constraint. For betweenness measures, <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi></mjx-math></mjx-container> is a blended average of the weights for any <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-math></mjx-container>, <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi></mjx-math></mjx-container> node pair passing through node <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-math></mjx-container>.</td></tr> <tr><td>betweenness_decay</td> <td style="text-align:center;"><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;padding-left:0.179em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-munder space="2"><mjx-row><mjx-base style="padding-left:0.28em;"><mjx-mo class="mjx-lop"><mjx-c c="2211"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top:0.167em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="2260"></mjx-c></mjx-mo><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-TeXAtom></mjx-under></mjx-row></mjx-munder><mjx-msub space="2"><mjx-mi noIC="true" class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.177em;"><mjx-TeXAtom size="s"><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-TeXAtom></mjx-script></mjx-msub><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="x"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="p"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="["></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="]"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-mstyle></mjx-math></mjx-container></td> <td>Adds a distance decay to betweenness. <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi></mjx-math></mjx-container> represents the full distance from any <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="j"></mjx-c></mjx-mi></mjx-math></mjx-container> to <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi></mjx-math></mjx-container> node pair passing through node <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi></mjx-math></mjx-container>.</td></tr></tbody></table> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>The closeness family of measures, i.e. <code>harmonic</code>, <code>improved</code>, and <code>gravity_index</code>, perform similarly in most situations. <code>harmonic</code> centrality can be problematic on graphs where nodes are mistakenly placed too close together or where impedances otherwise approach zero, as may be the case for simplest-path measures or small distance thesholds. This happens because the outcome of the division step can balloon towards <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-n"><mjx-c c="221E"></mjx-c></mjx-mi></mjx-math></mjx-container>, particularly noticeable once values decrease below <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container>. <code>improved</code> centrality is more robust because all reachable nodes are summed prior to the division step. <code>gravity_index</code> centrality is the most robust method in this regards, and also offers a graceful and tunable representation of distance decays via the negative exponential function.</p></div> <div class="tip custom-block"><p class="custom-block-title">Hint</p> <p>The following methods are simplified wrappers for some of the more commonly used forms of network centrality. Note that for cases requiring more than one form of centrality on large graphs, it may be substantially faster to compute all variants at once by using the underlying <a href="#compute-centrality">@compute_centrality</a> method directly.</p></div> <h2 id="harmonic-closeness"><a href="#harmonic-closeness" aria-hidden="true" class="header-anchor">#</a> @harmonic_closeness</h2> <div class="sig-style" data-v-be8a829e>Network_Layer.harmonic_closeness()</div> <p>Compute harmonic closeness. See <a href="#compute-centrality">@compute_centrality</a> for additional information.</p> <p>The data key is <code>harmonic</code>, e.g.:</p> <p><code>Network_Layer.metrics['centrality']['harmonic'][&lt;&lt;distance key&gt;&gt;][&lt;&lt;node idx&gt;&gt;]</code></p> <h2 id="improved-closeness"><a href="#improved-closeness" aria-hidden="true" class="header-anchor">#</a> @improved_closeness</h2> <div class="sig-style" data-v-be8a829e>Network_Layer.improved_closeness()</div> <p>Compute improved closeness. See <a href="#compute-centrality">@compute_centrality</a> for additional information.</p> <p>The data key is <code>improved</code>, e.g.:</p> <p><code>Network_Layer.metrics['centrality']['improved'][&lt;&lt;distance key&gt;&gt;][&lt;&lt;node idx&gt;&gt;]</code></p> <h2 id="gravity-index"><a href="#gravity-index" aria-hidden="true" class="header-anchor">#</a> @gravity_index <div class="chip-style">
  renamed in v0.8.10
</div></h2> <div class="sig-style" data-v-be8a829e>Network_Layer.gravity_index()</div> <p>Compute the gravity index. See <a href="#compute-centrality">@compute_centrality</a> for additional information.</p> <p>The data key is <code>gravity_index</code>, e.g.:</p> <p><code>Network_Layer.metrics['centrality']['gravity_index'][&lt;&lt;distance key&gt;&gt;][&lt;&lt;node idx&gt;&gt;]</code></p> <h2 id="betweenness"><a href="#betweenness" aria-hidden="true" class="header-anchor">#</a> @betweenness</h2> <div class="sig-style" data-v-be8a829e>Network_Layer.betweenness()</div> <p>Compute betweenness. See <a href="#compute-centrality">@compute_centrality</a> for additional information.</p> <p>The data key is <code>betweenness</code>, e.g.:</p> <p><code>Network_Layer.metrics['centrality']['betweenness'][&lt;&lt;distance key&gt;&gt;][&lt;&lt;node idx&gt;&gt;]</code></p> <h2 id="betweenness-decay"><a href="#betweenness-decay" aria-hidden="true" class="header-anchor">#</a> @betweenness_decay <div class="chip-style">
  renamed in v0.8.10
</div></h2> <div class="sig-style" data-v-be8a829e>Network_Layer.betweenness_decay()</div> <p>Compute betweenness taking spatial impedances into account. See <a href="#compute-centrality">@compute_centrality</a> for additional information.</p> <p>The data key is <code>betweenness_decay</code>, e.g.:</p> <p><code>Network_Layer.metrics['centrality']['betweenness_decay'][&lt;&lt;distance key&gt;&gt;][&lt;&lt;node idx&gt;&gt;]</code></p> <h2 id="network-layer-from-nx"><a href="#network-layer-from-nx" aria-hidden="true" class="header-anchor">#</a> Network_Layer_From_nX <div class="chip-style">
  class
</div></h2> <div class="sig-style" data-v-be8a829e><pre data-v-be8a829e>Network_Layer_From_nX(networkX_graph,
                      distances=None,
                      betas=None,
                      min_threshold_wt=0.01831563888873418,
                      angular=False)
</pre></div> <p>Directly transposes a <code>networkX</code> graph into a <code>Network_Layer</code>. This <code>class</code> simplifies the conversion of <code>NetworkX</code> graphs by calling <a href="/cityseer/util/graphs.html#graph-maps-from-nx"><code>graph_maps_from_nX</code></a> internally. Methods and properties are inherited from the parent <a href="#network-layer"><code>Network_Layer</code></a> class.</p> <div class="heading-style" data-v-98009ffe>Parameters</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      networkX_graph
    </div> <div class="elem-type" data-v-342b6d4a>
      nx.Graph
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>networkX</code> graph.</p> <p data-v-342b6d4a><code data-v-342b6d4a>x</code> and <code data-v-342b6d4a>y</code> node attributes are required. The <code data-v-342b6d4a>weight</code> node attribute is optional, and a default of <code data-v-342b6d4a>1</code> will be used if not present. The <code data-v-342b6d4a>live</code> node attribute is optional, but recommended. See <a href="#network-layer" data-v-342b6d4a><code data-v-342b6d4a>Network_Layer</code></a> for more information about what these attributes represent.</p> <p data-v-342b6d4a><code data-v-342b6d4a>length</code> and <code data-v-342b6d4a>impedance</code> edge attributes are required. See <a href="#network-layer" data-v-342b6d4a><code data-v-342b6d4a>Network_Layer</code></a> for more information.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      distances
    </div> <div class="elem-type" data-v-342b6d4a>
      int, float, list, tuple, np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A distance, or <code data-v-342b6d4a>list</code>, <code data-v-342b6d4a>tuple</code>, or <code data-v-342b6d4a>numpy</code> array of distances corresponding to the local <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-msub data-v-342b6d4a><mjx-mi noIC="true" class="mjx-i" data-v-342b6d4a><mjx-c c="d" data-v-342b6d4a></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;" data-v-342b6d4a><mjx-TeXAtom size="s" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="m" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="a" data-v-342b6d4a></mjx-c></mjx-mi><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="x" data-v-342b6d4a></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> thresholds to be used for centrality (and land-use) calculations. The <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container> parameters (for distance-weighted metrics) will be determined implicitly. If the <code data-v-342b6d4a>distances</code> parameter is not provided, then the <code data-v-342b6d4a>beta</code> parameter must be provided instead. Use a distance of <code data-v-342b6d4a>np.inf</code> where no distance threshold should be enforced.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      betas
    </div> <div class="elem-type" data-v-342b6d4a>
      float, list, tuple, np.ndarray
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container>, or <code data-v-342b6d4a>list</code>, <code data-v-342b6d4a>tuple</code>, or <code data-v-342b6d4a>numpy</code> array of <mjx-container jax="CHTML" class="MathJax" data-v-342b6d4a><mjx-math class=" MJX-TEX" data-v-342b6d4a><mjx-mi class="mjx-i" data-v-342b6d4a><mjx-c c="3B2" data-v-342b6d4a></mjx-c></mjx-mi></mjx-math></mjx-container> to be used for the exponential decay function for weighted metrics. The <code data-v-342b6d4a>distance</code> parameters for unweighted metrics will be determined implicitly. If the <code data-v-342b6d4a>betas</code> parameter is not provided, then the <code data-v-342b6d4a>distance</code> parameter must be provided instead.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      min_threshold_wt
    </div> <div class="elem-type" data-v-342b6d4a>
      float
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>The default <code data-v-342b6d4a>min_threshold_wt</code> parameter can be overridden to generate custom mappings between the <code data-v-342b6d4a>distance</code> and <code data-v-342b6d4a>beta</code> parameters. See <a href="#distance-from-beta" data-v-342b6d4a>distance_from_beta</a> for more information.</p></div></div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      angular
    </div> <div class="elem-type" data-v-342b6d4a>
      bool
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>Set the <code data-v-342b6d4a>angular</code> parameter to <code data-v-342b6d4a>True</code> if using angular impedances. Angular impedances can cause shortest-path algorithms to sidestep sharp turns, potentially leading to misleading results. Setting <code data-v-342b6d4a>angular=True</code> adds a step to the algorithm in order to prevent this behaviour.</p></div></div> <div class="heading-style" data-v-98009ffe>Returns</div> <div class="container" data-v-342b6d4a><div class="column" data-v-342b6d4a><div class="elem-name" data-v-342b6d4a>
      Network_Layer
    </div> <div class="elem-type" data-v-342b6d4a>
      class
    </div></div> <div class="elem-content" data-v-342b6d4a><p data-v-342b6d4a>A <code data-v-342b6d4a>Network_Layer</code>.</p></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/5/2019, 1:02:22 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/cityseer/metrics/layers.html" class="prev">metrics.layers</a></span> <span class="next"><a href="/cityseer/util/graphs.html">util.graphs</a>
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/cityseer/assets/js/app.ffe07a9b.js" defer></script><script src="/cityseer/assets/js/2.1b2a85c3.js" defer></script><script src="/cityseer/assets/js/7.1abd5355.js" defer></script><script src="/cityseer/assets/js/13.29c22ad6.js" defer></script><script src="/cityseer/assets/js/12.99207078.js" defer></script><script src="/cityseer/assets/js/11.8afffa76.js" defer></script><script src="/cityseer/assets/js/10.86e4b51d.js" defer></script>
  </body>
</html>
